# HTTP协议

## 客户端缓存失效

有两种策略：强缓存优先于协商缓存。

- 强缓存，客户端直接规定缓存的有效时间是多少。
- 协商缓存，当强缓存失效之后，客户端将缓存信息中的Etag和Last-Modified通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存，否则更新。

## 客户端确认证书有效性 

基于两个哈希值的比较。

一个是对服务端的一些信息进行哈希，得到H1。

另一个是对收到的数字签名进行解密，得到H2，比较H1和H2就能辨别证书是否有效。

## TCP连接、SSL连接顺序

理论上SSL是在应用层和传输层之间的协议，不清楚TCP连接的第二次握手就附带SSL连接所需要的数字证书。

## HTTPS慢吗  

https一般比http慢2到100倍，https慢的原因有两点：

1.SSL通信需要消耗网络资源。

2.加密解密需要消耗大量的CPU及内存资源，导致处理速度变慢。

## HTTP与RPC的区别

1. 传输协议
   RPC，可以基于TCP协议，也可以基于HTTP协议
2. 传输效率
   RPC，使⽤自定义的TCP协议，可以让请求报文体积更小，提高传输效率 
   HTTP，需要封装一层额外的请求头。
3. 性能消耗，主要在于序列化和反序列化的耗时
   RPC，可以基于thrift实现高效的二进制传输
   HTTP，大部分是通过json来实现的，字节大小和序列化耗时都比thrift要更消耗性能
4. 负载均衡
   RPC，基本都自带了了负载均衡策略
   HTTP，需要配置Nginx，HAProxy来实现
5. 服务治理（下游服务新增，重启，下线时如何不影响上游调用者）
   RPC，能做到自动通知，不影响上游
   HTTP，需要事先通知，修改Nginx/HAProxy配置



## Session、Cookie

1. 由于HTTP协议是无状态的协议，所以服务端需要记录用户的状态时，就需要用某种机制来识具体的用户，这个机制就是Session.
2. 服务端会把session id发给客户端，然后客户端可以用Cookie把sid缓存起来，等下一次请求的时候服务端就能识别用户了。
3. Cookie其实还能缓存用户密码什么的，方便用户使用。

### Cookie被禁用怎么办

最常用的就是利用 URL 重写把 Session ID 直接附加在 URL 路径的后面。

## URL 与 URI 区别

- URI 是统一资源标志符，可以唯一标识一个资源。
- URL 是定位符，可以提供该资源的路径。它是一种具体的 URI，即 URL 可以用来标识一个资源，而且还指明了如何 locate 这个资源。
- URI 的作用像身份证号一样，URL 的作用更像家庭住址一样。URL 是一种具体的 URI，它不仅唯一标识资源，而且还提供了定位该资源的信息。



# 参考网址

https://juejin.cn/post/6844903904669335566