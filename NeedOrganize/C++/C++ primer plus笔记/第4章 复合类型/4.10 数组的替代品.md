# 4.10.2 模板类array（C++11）

vector类的功能比数组强大，但付出的代价是效率稍低。如果您需要的是长度固定的数组，使用数组是更佳的选择，但代价是不那么方便和安全。有鉴于此，C++11新增了模板类array，它也位于名称空间std中。与数组一样，array对象的长度也是固定的，也使用栈（静态内存分配），而不是自由存储区，因此其效率与数组相同，但更方便，更安全。

```c++
#include<array>
using namespace std;
array<int,5>ai;	//create array object of 5 ints
array<double,4>ad={1.2, 2.1, 3.43, 4.3};
```

# 4.10.3 比较数组、vector对象和array对象

```C++
double a1[4]={1.2, 2.4, 3.6, 4.8};
vector<double>a2(4);	//create vector with 4 elements
a2[0]=1.0/3.0;
a2[1]=1.0/5.0;
a2[2]=1.0/7.0;
a2[3]=1.0/9.0;
array<double,4>a3={3.14, 2.72, 1.52, 2.41};
array<double,4>a4;
a4=a3;	//valid for array objects of same size
```

array对象和数组存储在相同的内存区域（即栈）中，而vector对象存储在另一个区域（自由存储区或堆）中。

可以将一个array对象赋给另一个array对象；而对于数组，必须逐元素复制数据。

```C++
a1[-2]=20.2;
```

索引-2是什么意思呢？这将被转换为如下代码：

`*(a1-2)=20.2`

其含义如下：找到a1指向的地方，向前移两个double元素，并将20.2存储到目的地。也就是说，将信息存储到数组的外面。与C语言一样，C++也不检查这种超界错误。这表明数组的行为是不安全的。

vector和array对象能够禁止这种行为吗？也就是说，您仍可编写不安全的代码，如下所示：

```C++
a2[-2]=.5;	//still allowed
a3[200]=1.4;
```

然而，您还有其他选择。一种选择是使用成员函数at()。就像可以使用cin对象的成员函数getline()一样，您也可以使用vector和array对象的成员函数at()：

```C++
a2.at(1)=2.3;
```

括号表示法和成员函数at()的差别在于，使用at()时，将在运行期间捕获非法索引，而程序默认将中断。这种额外检查的代价是运行时间更长，这就是C++让允许您使用任何一种表示法的原因所在。另外，这些类还让您能够降低意外超界错误的概率。例如，它们包含成员函数begin()和end()，让您能够确定边界，以免无意间超界。