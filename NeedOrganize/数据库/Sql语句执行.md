<img src="https://img2018.cnblogs.com/blog/1071918/201905/1071918-20190527192044145-332634686.png" alt="img" style="zoom: 33%;" />

## **连接器**

完成 TCP 握手连接之后，连接器即开始身份认证

包括密码和权限的认证。

客户端如果太长时间没有动静，连接器就会自动断开。

这个时间是由参数 wait_timeout 控制的，默认值是 8 小时。

## **查询缓存**

\- MySQL 拿到一个查询请求后，会先到查询缓存查询

　　　　- 如果你的查询能够直接在这个缓存中找到 key，那么这个 value 就会被直接返回给客户端。

　　　　**- 但是大多数情况下我会建议你不要使用查询缓存，为什么呢？因为查询缓存往往弊大于利。**

　　　　　　- 查询缓存的失效非常频繁，只要有对一个表的更新，这个表上所有的查询缓存都会被清空。

　　　　　　- 因此很可能你费劲地把结果存起来，还没使用呢，就被一个更新全清空了。

　　　　　　- 对于更新压力大的数据库来说，查询缓存的命中率会非常低。

　　　　　　- 除非你的业务就是有一张静态表，很长时间才会更新一次。

　　　　　　- 比如，一个系统配置表，那这张表上的查询才适合使用查询缓存。

　　　　　　- 在 MySQL 8.0 中，缓存功能彻底被废弃。